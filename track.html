<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Track Your Order - Elegets Electronics</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container py-5">
    <h2 class="text-center mb-4">Track Your Shipment</h2>

    <div class="input-group mb-4">
      <input type="text" id="trackingId" class="form-control" placeholder="Enter Tracking ID (AWB)">
      <button onclick="trackOrder()" class="btn btn-primary">Track</button>
    </div>

    <div id="result" class="card shadow-sm p-4 d-none">
      <h5 id="orderStatus" class="mb-3 text-success"></h5>
      <ul id="trackingHistory" class="list-group"></ul>
    </div>

    <div id="errorMsg" class="text-danger mt-3 d-none">Tracking ID not found. Please check again.</div>
  </div>

  <script>
    async function trackOrder() {
      const trackingId = document.getElementById('trackingId').value.trim();
      const resultCard = document.getElementById('result');
      const errorMsg = document.getElementById('errorMsg');
      const orderStatus = document.getElementById('orderStatus');
      const trackingHistory = document.getElementById('trackingHistory');

      resultCard.classList.add('d-none');
      errorMsg.classList.add('d-none');
      trackingHistory.innerHTML = '';

      if (!trackingId) return;

      try {
        const response = await fetch('https://api.nimbuspost.com/v1/track-order', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': 'Bearer YOUR_API_KEY'
          },
          body: JSON.stringify({ awb_number: trackingId })
        });

        const data = await response.json();
        if (data.success && data.data) {
          orderStatus.textContent = `Current Status: ${data.data.current_status}`;
          data.data.tracking_details.forEach(detail => {
            const li = document.createElement('li');
            li.className = 'list-group-item';
            li.textContent = `${detail.status} - ${detail.location} (${detail.datetime})`;
            trackingHistory.appendChild(li);
          });
          resultCard.classList.remove('d-none');
        } else {
          errorMsg.classList.remove('d-none');
        }
      } catch (error) {
        errorMsg.classList.remove('d-none');
      }
    }
  </script>
</body>
</html>
